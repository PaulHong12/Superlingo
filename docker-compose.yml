services:
  diagnosis_web:
    image: node:20-bullseye
    container_name: superlingo_diagnosis
    working_dir: /app
    ports:
      - "8082:8082"
    environment:
      EXPO_NO_TELEMETRY: "1"
      EXPO_PUBLIC_API_BASE: "http://host.docker.internal:8000"
    volumes:
      - ./diagnosis-app:/app
    command: >
      bash -lc "
        npm ci || npm install &&
        npx expo start --web --host 0.0.0.0 --port 8082 -c
      "
